<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to matchmaker • matchmaker</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to matchmaker">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matchmaker</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to matchmaker</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/matchmaker">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to matchmaker</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/reconhub/matchmaker/blob/master/vignettes/intro.Rmd"><code>vignettes/intro.Rmd</code></a></small>
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<p>The goal of matchmaker is to provide dictionary-based cleaning for R users in a simple and intuitive manner built on the {forcats} package. Some of the features of this package include:</p>
<ul>
<li>preservation of factor orders</li>
<li>ability to specify explicit and implicit missing values</li>
<li>option to replace by fuzzy matching (regular expressions, anchored by default)</li>
<li>optional variable selection by fuzzy matching</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version of matchmaker from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"reconhub/matchmaker"</span>)</a></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>The matchmaker package has two user-facing functions that perform dictionary-based cleaning:</p>
<ul>
<li>
<code><a href="../reference/match_vec.html">match_vec()</a></code> will translate the values in a single vector</li>
<li>
<code><a href="../reference/match_df.html">match_df()</a></code> will translate values in all specified columns of a data frame</li>
</ul>
<p>Mostly, users will be working with <code><a href="../reference/match_df.html">match_df()</a></code> to transform values across specific columns. This is what a typical workflow would look like:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"matchmaker"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># Read in data set</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">dat &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="../reference/matchmaker_example.html">matchmaker_example</a></span>(<span class="st">"coded-data.csv"</span>),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">dat<span class="op">$</span>date &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(dat<span class="op">$</span>date)</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co"># Read in dictionary</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">dict &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="../reference/matchmaker_example.html">matchmaker_example</a></span>(<span class="st">"spelling-dictionary.csv"</span>),</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Clean spelling based on dictionary -----------------------------</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">dict <span class="co"># show the dict</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;     options       values                 grp orders</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; 1         y          Yes         readmission      1</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; 2         n           No         readmission      2</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 3         u      Unknown         readmission      3</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 4  .missing      Missing         readmission      4</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 5         0          Yes             treated      1</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 6         1           No             treated      2</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 7  .missing      Missing             treated      3</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; 8         1  Facility  1            facility      1</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; 9         2  Facility  2            facility      2</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; 10        3  Facility  3            facility      3</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; 11        4  Facility  4            facility      4</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; 12        5  Facility  5            facility      5</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 13        6  Facility  6            facility      6</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; 14        7  Facility  7            facility      7</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; 15        8  Facility  8            facility      8</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; 16        9  Facility  9            facility      9</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; 17       10  Facility 10            facility     10</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; 18 .default      Unknown            facility     11</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; 19        0          0-9           age_group      1</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; 20       10        10-19           age_group      2</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt; 21       20        20-29           age_group      3</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; 22       30        30-39           age_group      4</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; 23       40        40-49           age_group      5</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; 24       50          50+           age_group      6</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; 25     high         High .regex ^lab_result_      1</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; 26     norm       Normal .regex ^lab_result_      2</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; 27      inc Inconclusive .regex ^lab_result_      3</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; 28        y          yes             .global    Inf</span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; 29        n           no             .global    Inf</span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; 30        u      unknown             .global    Inf</span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; 31      unk      unknown             .global    Inf</span></a>
<a class="sourceLine" id="cb3-36" data-line-number="36"><span class="co">#&gt; 32      oui          yes             .global    Inf</span></a>
<a class="sourceLine" id="cb3-37" data-line-number="37"><span class="co">#&gt; 33 .missing      missing             .global    Inf</span></a>
<a class="sourceLine" id="cb3-38" data-line-number="38"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(dat) <span class="co"># show the data</span></a>
<a class="sourceLine" id="cb3-39" data-line-number="39"><span class="co">#&gt;       id       date readmission treated facility age_group lab_result_01</span></a>
<a class="sourceLine" id="cb3-40" data-line-number="40"><span class="co">#&gt; 1 ef267c 2019-07-08        &lt;NA&gt;       0        C        10           unk</span></a>
<a class="sourceLine" id="cb3-41" data-line-number="41"><span class="co">#&gt; 2 e80a37 2019-07-07           y       0        3        10           inc</span></a>
<a class="sourceLine" id="cb3-42" data-line-number="42"><span class="co">#&gt; 3 b72883 2019-07-07           y       1        8        30           inc</span></a>
<a class="sourceLine" id="cb3-43" data-line-number="43"><span class="co">#&gt; 4 c9ee86 2019-07-09           n       1        4        40           inc</span></a>
<a class="sourceLine" id="cb3-44" data-line-number="44"><span class="co">#&gt; 5 40bc7a 2019-07-12           n       1        6         0          norm</span></a>
<a class="sourceLine" id="cb3-45" data-line-number="45"><span class="co">#&gt; 6 46566e 2019-07-14           y      NA        B        50           unk</span></a>
<a class="sourceLine" id="cb3-46" data-line-number="46"><span class="co">#&gt;   lab_result_02 lab_result_03 has_symptoms followup</span></a>
<a class="sourceLine" id="cb3-47" data-line-number="47"><span class="co">#&gt; 1          high           inc         &lt;NA&gt;        u</span></a>
<a class="sourceLine" id="cb3-48" data-line-number="48"><span class="co">#&gt; 2           unk          norm            y      oui</span></a>
<a class="sourceLine" id="cb3-49" data-line-number="49"><span class="co">#&gt; 3          norm           inc                   oui</span></a>
<a class="sourceLine" id="cb3-50" data-line-number="50"><span class="co">#&gt; 4           inc           unk            y      oui</span></a>
<a class="sourceLine" id="cb3-51" data-line-number="51"><span class="co">#&gt; 5           unk          norm         &lt;NA&gt;        n</span></a>
<a class="sourceLine" id="cb3-52" data-line-number="52"><span class="co">#&gt; 6           unk           inc         &lt;NA&gt;     &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb3-53" data-line-number="53"></a>
<a class="sourceLine" id="cb3-54" data-line-number="54">cleaned &lt;-<span class="st"> </span><span class="kw"><a href="../reference/match_df.html">match_df</a></span>(dat,</a>
<a class="sourceLine" id="cb3-55" data-line-number="55">  <span class="dt">dictionary =</span> dict,</a>
<a class="sourceLine" id="cb3-56" data-line-number="56">  <span class="dt">from =</span> <span class="st">"options"</span>,</a>
<a class="sourceLine" id="cb3-57" data-line-number="57">  <span class="dt">to =</span> <span class="st">"values"</span>,</a>
<a class="sourceLine" id="cb3-58" data-line-number="58">  <span class="dt">by =</span> <span class="st">"grp"</span></a>
<a class="sourceLine" id="cb3-59" data-line-number="59">)</a>
<a class="sourceLine" id="cb3-60" data-line-number="60"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(cleaned)</a>
<a class="sourceLine" id="cb3-61" data-line-number="61"><span class="co">#&gt;       id       date readmission treated    facility age_group lab_result_01</span></a>
<a class="sourceLine" id="cb3-62" data-line-number="62"><span class="co">#&gt; 1 ef267c 2019-07-08     Missing     Yes     Unknown     10-19       unknown</span></a>
<a class="sourceLine" id="cb3-63" data-line-number="63"><span class="co">#&gt; 2 e80a37 2019-07-07         Yes     Yes Facility  3     10-19  Inconclusive</span></a>
<a class="sourceLine" id="cb3-64" data-line-number="64"><span class="co">#&gt; 3 b72883 2019-07-07         Yes      No Facility  8     30-39  Inconclusive</span></a>
<a class="sourceLine" id="cb3-65" data-line-number="65"><span class="co">#&gt; 4 c9ee86 2019-07-09          No      No Facility  4     40-49  Inconclusive</span></a>
<a class="sourceLine" id="cb3-66" data-line-number="66"><span class="co">#&gt; 5 40bc7a 2019-07-12          No      No Facility  6       0-9        Normal</span></a>
<a class="sourceLine" id="cb3-67" data-line-number="67"><span class="co">#&gt; 6 46566e 2019-07-14         Yes Missing     Unknown       50+       unknown</span></a>
<a class="sourceLine" id="cb3-68" data-line-number="68"><span class="co">#&gt;   lab_result_02 lab_result_03 has_symptoms followup</span></a>
<a class="sourceLine" id="cb3-69" data-line-number="69"><span class="co">#&gt; 1          High  Inconclusive      missing  unknown</span></a>
<a class="sourceLine" id="cb3-70" data-line-number="70"><span class="co">#&gt; 2       unknown        Normal          yes      yes</span></a>
<a class="sourceLine" id="cb3-71" data-line-number="71"><span class="co">#&gt; 3        Normal  Inconclusive      missing      yes</span></a>
<a class="sourceLine" id="cb3-72" data-line-number="72"><span class="co">#&gt; 4  Inconclusive       unknown          yes      yes</span></a>
<a class="sourceLine" id="cb3-73" data-line-number="73"><span class="co">#&gt; 5       unknown        Normal      missing       no</span></a>
<a class="sourceLine" id="cb3-74" data-line-number="74"><span class="co">#&gt; 6       unknown  Inconclusive      missing  missing</span></a></code></pre></div>
</div>
<div id="special-keywords" class="section level1">
<h1 class="hasAnchor">
<a href="#special-keywords" class="anchor"></a>Special Keywords</h1>
<div id="keys-from-column" class="section level2">
<h2 class="hasAnchor">
<a href="#keys-from-column" class="anchor"></a>Keys (<code>from</code> column)</h2>
<p>The <code>from</code> column of the dictionary will contain the keys that you want to match in your current data set. These are expected to match exactly with the exception of three reserved keywords that start with a full stop:</p>
<ul>
<li>
<code>.regex [pattern]</code>: will replace anything matching [pattern]. This is executed before any other replacements are made. The [pattern] should be an unquoted, valid, PERL-flavored regular expression. Any whitespace padding the regular expression is discarded.</li>
<li>
<code>.missing</code>: replaces any blank cells or <code>NA</code> values.</li>
<li>
<code>.default</code>: replaces ALL values that are not defined in the dictionary and are not missing.</li>
</ul>
<blockquote>
<p>* Any <code>NA</code> values in the keys will be interpreted as “NA” because it’s a common mistake to import the value “NA” to missing in R. If you intend for <code>NA</code> to indicate missing data, replace it with: <code>dictionary[[1]][is.na(dictionary[[1]]] &lt;- ".missing"</code></p>
</blockquote>
</div>
<div id="values-to-column" class="section level2">
<h2 class="hasAnchor">
<a href="#values-to-column" class="anchor"></a>Values (<code>to</code> column)</h2>
<p>The values will replace their respective keys exactly as they are presented with one exception. There is currently one recognised keyword that can be placed in the to column of your dictionary:</p>
<ul>
<li>
<code>.na</code>: Replace keys with missing data. When used in combination with the <code>.missing</code> keyword (in column 1), it can allow you to differentiate between explicit and implicit missing data.</li>
</ul>
</div>
<div id="keyword-demonstration" class="section level2">
<h2 class="hasAnchor">
<a href="#keyword-demonstration" class="anchor"></a>Keyword demonstration</h2>
<p>For example, let’s say you have the following data set of people asked if they like ice cream:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">who &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Anakin"</span>, <span class="st">"Darth"</span>, <span class="st">"R2-D2"</span>, <span class="st">"Leia"</span>, <span class="st">"C-3PO"</span>, <span class="st">"Rey"</span>, <span class="st">"Obi-Wan"</span>, <span class="st">"Luke"</span>, <span class="st">"Chewy"</span>, <span class="st">"Owen"</span>, <span class="st">"Lando"</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">icecream &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="st">"NO"</span>, <span class="st">"N"</span>, <span class="st">"yes"</span>, <span class="st">"Y"</span>, <span class="st">"n"</span>, <span class="st">"n"</span>, <span class="ot">NA</span>, <span class="st">""</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(icecream) &lt;-<span class="st"> </span>who</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">icecream</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;  Anakin   Darth   R2-D2    Leia   C-3PO     Rey Obi-Wan    Luke   Chewy    Owen </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;     "a"     "b"     "c"    "NO"     "N"   "yes"     "Y"     "n"     "n"      NA </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;   Lando </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;      ""</span></a></code></pre></div>
<div id="missing-data-and-default-values" class="section level3">
<h3 class="hasAnchor">
<a href="#missing-data-and-default-values" class="anchor"></a>Missing data and default values</h3>
<p>You could contstruct a dictionary that has a 1:1 relationship between the keys that looks like this:</p>
<table class="table">
<caption>my_dict1</caption>
<thead><tr class="header">
<th align="left">keys</th>
<th align="left">values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">yes</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">Y</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="left">n</td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">N</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">NO</td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">.missing</td>
<td align="left">.na</td>
</tr>
<tr class="odd">
<td align="left">.default</td>
<td align="left">(invalid)</td>
</tr>
</tbody>
</table>
<p>Once you read in the file (either via <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> or <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">readxl::read_excel()</a></code> if you use excel), you can use it as a dictionary. This dictionary will do three things:</p>
<ol style="list-style-type: decimal">
<li>convert iterations of yes/no into Yes and No</li>
<li>convert blank or <code>NA</code> values to explicit missing data.</li>
<li>convert all other values to “(invalid)”</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/match_vec.html">match_vec</a></span>(icecream, <span class="dt">dictionary =</span> my_dict1, <span class="dt">from =</span> <span class="st">"keys"</span>, <span class="dt">to =</span> <span class="st">"values"</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; Warning: 'a', 'b', 'c' were changed to the default value ('(invalid)')</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;      Anakin       Darth       R2-D2        Leia       C-3PO         Rey </span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; "(invalid)" "(invalid)" "(invalid)"        "No"        "No"       "Yes" </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;     Obi-Wan        Luke       Chewy        Owen       Lando </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;       "Yes"        "No"        "No"          NA          NA</span></a></code></pre></div>
</div>
<div id="fuzzy-matching" class="section level3">
<h3 class="hasAnchor">
<a href="#fuzzy-matching" class="anchor"></a>Fuzzy matching</h3>
<p>Now we have nice, predictable values, but let’s say Luke really didn’t like ice cream. If he responded “NOOOOOOO” instead of “n”, then the dictionary we specified would convert it to “(invalid)”:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">icecream[<span class="st">"Luke"</span>] &lt;-<span class="st"> "NOOOOOOO"</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="../reference/match_vec.html">match_vec</a></span>(icecream, <span class="dt">dictionary =</span> my_dict1, <span class="dt">from =</span> <span class="st">"keys"</span>, <span class="dt">to =</span> <span class="st">"values"</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; Warning: 'a', 'b', 'c', 'NOOOOOOO' were changed to the default value</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; ('(invalid)')</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;      Anakin       Darth       R2-D2        Leia       C-3PO         Rey </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; "(invalid)" "(invalid)" "(invalid)"        "No"        "No"       "Yes" </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;     Obi-Wan        Luke       Chewy        Owen       Lando </span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;       "Yes" "(invalid)"        "No"          NA          NA</span></a></code></pre></div>
<p>We can fix this if we use pattern matching. Here we are selecting from any valid spelling of yes/no with trailing letters so that it capture’s Luke’s extreme objection to ice cream. To do this we add the <code>.regex</code> prefix (note the space after <code>.regex</code>):</p>
<table class="table">
<caption>my_dict2</caption>
<thead><tr class="header">
<th align="left">keys</th>
<th align="left">values</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">.regex ^[Yy][Ee]?[Ss]*$</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">.regex ^[Nn][Oo]*$</td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">.missing</td>
<td align="left">.na</td>
</tr>
<tr class="even">
<td align="left">.default</td>
<td align="left">(invalid)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/match_vec.html">match_vec</a></span>(icecream, <span class="dt">dictionary =</span> my_dict2, <span class="dt">from =</span> <span class="st">"keys"</span>, <span class="dt">to =</span> <span class="st">"values"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; Warning: 'a', 'b', 'c' were changed to the default value ('(invalid)')</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;      Anakin       Darth       R2-D2        Leia       C-3PO         Rey </span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; "(invalid)" "(invalid)" "(invalid)"        "No"        "No"       "Yes" </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;     Obi-Wan        Luke       Chewy        Owen       Lando </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;       "Yes"        "No"        "No"          NA          NA</span></a></code></pre></div>
<p>The drawback to fuzzy matching is that it will convert things that match the pattern, so be very careful when constructing your keys.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      <li><a href="#example">Example</a></li>
      <li>
<a href="#special-keywords">Special Keywords</a><ul class="nav nav-pills nav-stacked">
<li><a href="#keys-from-column">Keys (<code>from</code> column)</a></li>
      <li><a href="#values-to-column">Values (<code>to</code> column)</a></li>
      <li><a href="#keyword-demonstration">Keyword demonstration</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zhian N. Kamvar.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
